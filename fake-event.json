{
    "action": "zq-pr-merged",
    "branch": "master",
    "client_payload": {
        "body": "This commit adds support for multi-key indexes and refactors\r\nsignificant pieces of the zar/zdx machinery.\r\n\r\nThe zar index files are still stored as separate files but\r\na header has been added to the base layer to provide magic,\r\nversion, key fields, and customization of the btree child\r\nfield (since it is stored alongside the key fields in the\r\nindex and there can be a name collision).\r\n\r\nWe also reworked index searches to return result over a\r\nchannel so that results from a dir walk are easily managed.\r\n\r\nA bug is fixed where null values would end up in the index.\r\nIt does not make sense to index non-existent values.\r\n\r\nWe separated the zdx create command into create and convert,\r\nwhere the latter converts an existing sorted-key zng file\r\ninto a zdx and the former creates a sorted-key table using\r\nan in-memory map (this should be replaced eventually with\r\nzql proc code when we have a spill-capable group-by).\r\n\r\nThere is a new \"zdx seek\" command, which indexes just\r\nfirst records after the start-of-stream (sos), where the\r\nvalue alongside each key is the seek offset of the sos.\r\n\r\nWe also made the behavior of zar find more sensible with the\r\n-z option, when selecting between file-path output and zng output.\r\n\r\nTo make multi-key search work properly, we added a new comparator\r\nfunction, expr.KeyCompareFn, which stores the key in the\r\nclosure and returns a comparison result for an arbitrary record\r\nwith the stored key.  In this case, the key and the record\r\ncan be of different types and the respective key fields in\r\nno consistent order between the types.",
        "branch": "zdx-multi-key",
        "merge_commit_sha": "c7ac2d817e74f604496693112a4743e789c7a0a3",
        "number": 749,
        "title": "support multi-key indexes and clean up zar/zdx",
        "url": "https://github.com/brimsec/zq/pull/749",
        "user": "mccanne"
    },
    "organization": {
        "avatar_url": "https://avatars1.githubusercontent.com/u/52328826?v=4",
        "description": "",
        "events_url": "https://api.github.com/orgs/brimsec/events",
        "hooks_url": "https://api.github.com/orgs/brimsec/hooks",
        "id": 52328826,
        "issues_url": "https://api.github.com/orgs/brimsec/issues",
        "login": "brimsec",
        "members_url": "https://api.github.com/orgs/brimsec/members{/member}",
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyMzI4ODI2",
        "public_members_url": "https://api.github.com/orgs/brimsec/public_members{/member}",
        "repos_url": "https://api.github.com/orgs/brimsec/repos",
        "url": "https://api.github.com/orgs/brimsec"
    },
    "repository": {
        "archive_url": "https://api.github.com/repos/brimsec/brim/{archive_format}{/ref}",
        "archived": false,
        "assignees_url": "https://api.github.com/repos/brimsec/brim/assignees{/user}",
        "blobs_url": "https://api.github.com/repos/brimsec/brim/git/blobs{/sha}",
        "branches_url": "https://api.github.com/repos/brimsec/brim/branches{/branch}",
        "clone_url": "https://github.com/brimsec/brim.git",
        "collaborators_url": "https://api.github.com/repos/brimsec/brim/collaborators{/collaborator}",
        "comments_url": "https://api.github.com/repos/brimsec/brim/comments{/number}",
        "commits_url": "https://api.github.com/repos/brimsec/brim/commits{/sha}",
        "compare_url": "https://api.github.com/repos/brimsec/brim/compare/{base}...{head}",
        "contents_url": "https://api.github.com/repos/brimsec/brim/contents/{+path}",
        "contributors_url": "https://api.github.com/repos/brimsec/brim/contributors",
        "created_at": "2018-08-09T23:10:01Z",
        "default_branch": "master",
        "deployments_url": "https://api.github.com/repos/brimsec/brim/deployments",
        "description": "Desktop application to efficiently search large packet captures and Zeek logs.",
        "disabled": false,
        "downloads_url": "https://api.github.com/repos/brimsec/brim/downloads",
        "events_url": "https://api.github.com/repos/brimsec/brim/events",
        "fork": false,
        "forks": 30,
        "forks_count": 30,
        "forks_url": "https://api.github.com/repos/brimsec/brim/forks",
        "full_name": "brimsec/brim",
        "git_commits_url": "https://api.github.com/repos/brimsec/brim/git/commits{/sha}",
        "git_refs_url": "https://api.github.com/repos/brimsec/brim/git/refs{/sha}",
        "git_tags_url": "https://api.github.com/repos/brimsec/brim/git/tags{/sha}",
        "git_url": "git://github.com/brimsec/brim.git",
        "has_downloads": true,
        "has_issues": true,
        "has_pages": false,
        "has_projects": false,
        "has_wiki": true,
        "homepage": "https://www.brimsecurity.com",
        "hooks_url": "https://api.github.com/repos/brimsec/brim/hooks",
        "html_url": "https://github.com/brimsec/brim",
        "id": 144212075,
        "issue_comment_url": "https://api.github.com/repos/brimsec/brim/issues/comments{/number}",
        "issue_events_url": "https://api.github.com/repos/brimsec/brim/issues/events{/number}",
        "issues_url": "https://api.github.com/repos/brimsec/brim/issues{/number}",
        "keys_url": "https://api.github.com/repos/brimsec/brim/keys{/key_id}",
        "labels_url": "https://api.github.com/repos/brimsec/brim/labels{/name}",
        "language": "JavaScript",
        "languages_url": "https://api.github.com/repos/brimsec/brim/languages",
        "license": {
            "key": "bsd-3-clause",
            "name": "BSD 3-Clause \"New\" or \"Revised\" License",
            "node_id": "MDc6TGljZW5zZTU=",
            "spdx_id": "BSD-3-Clause",
            "url": "https://api.github.com/licenses/bsd-3-clause"
        },
        "merges_url": "https://api.github.com/repos/brimsec/brim/merges",
        "milestones_url": "https://api.github.com/repos/brimsec/brim/milestones{/number}",
        "mirror_url": null,
        "name": "brim",
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDQyMTIwNzU=",
        "notifications_url": "https://api.github.com/repos/brimsec/brim/notifications{?since,all,participating}",
        "open_issues": 41,
        "open_issues_count": 41,
        "owner": {
            "avatar_url": "https://avatars1.githubusercontent.com/u/52328826?v=4",
            "events_url": "https://api.github.com/users/brimsec/events{/privacy}",
            "followers_url": "https://api.github.com/users/brimsec/followers",
            "following_url": "https://api.github.com/users/brimsec/following{/other_user}",
            "gists_url": "https://api.github.com/users/brimsec/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/brimsec",
            "id": 52328826,
            "login": "brimsec",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyMzI4ODI2",
            "organizations_url": "https://api.github.com/users/brimsec/orgs",
            "received_events_url": "https://api.github.com/users/brimsec/received_events",
            "repos_url": "https://api.github.com/users/brimsec/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/brimsec/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/brimsec/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/brimsec"
        },
        "private": false,
        "pulls_url": "https://api.github.com/repos/brimsec/brim/pulls{/number}",
        "pushed_at": "2020-05-08T18:56:22Z",
        "releases_url": "https://api.github.com/repos/brimsec/brim/releases{/id}",
        "size": 21214,
        "ssh_url": "git@github.com:brimsec/brim.git",
        "stargazers_count": 639,
        "stargazers_url": "https://api.github.com/repos/brimsec/brim/stargazers",
        "statuses_url": "https://api.github.com/repos/brimsec/brim/statuses/{sha}",
        "subscribers_url": "https://api.github.com/repos/brimsec/brim/subscribers",
        "subscription_url": "https://api.github.com/repos/brimsec/brim/subscription",
        "svn_url": "https://github.com/brimsec/brim",
        "tags_url": "https://api.github.com/repos/brimsec/brim/tags",
        "teams_url": "https://api.github.com/repos/brimsec/brim/teams",
        "trees_url": "https://api.github.com/repos/brimsec/brim/git/trees{/sha}",
        "updated_at": "2020-05-08T18:02:57Z",
        "url": "https://api.github.com/repos/brimsec/brim",
        "watchers": 639,
        "watchers_count": 639
    },
    "sender": {
        "avatar_url": "https://avatars0.githubusercontent.com/u/28399447?v=4",
        "events_url": "https://api.github.com/users/looky-automation/events{/privacy}",
        "followers_url": "https://api.github.com/users/looky-automation/followers",
        "following_url": "https://api.github.com/users/looky-automation/following{/other_user}",
        "gists_url": "https://api.github.com/users/looky-automation/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/looky-automation",
        "id": 28399447,
        "login": "looky-automation",
        "node_id": "MDQ6VXNlcjI4Mzk5NDQ3",
        "organizations_url": "https://api.github.com/users/looky-automation/orgs",
        "received_events_url": "https://api.github.com/users/looky-automation/received_events",
        "repos_url": "https://api.github.com/users/looky-automation/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/looky-automation/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/looky-automation/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/looky-automation"
    }
}
